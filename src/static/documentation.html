<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Documentation</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
		<link
			href="https://fonts.googleapis.com/css2?family=Architects+Daughter&amp;display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="callout.css" />
	</head>
	<style>
		.accordion-button span {
			color: white;
			border-radius: 3px;
			color: #fff;
			font-family: sans-serif;
			font-size: 19px;
			min-width: 80px;
			padding: 6px 0;
			text-align: center;
			text-shadow: 0 1px 0 rgb(0 0 0 / 10%);
		}
		.accordion-button span.get {
			background: #49cc90;
			font-weight: 700;
		}
		.accordion-button span.url {
			align-items: center;
			color: #3b4151;
			font-family: monospace;
			font-size: 21px;
			font-weight: 600;
			padding: 0 10px;
			word-break: break-word;
			font-weight: 700;
		}
		.accordion-button span.info {
			color: #3b4151;
			font-family: sans-serif;
			font-size: 16px;
			word-break: break-word;
		}
		pre {
			background-color: ghostwhite;
			border: 1px solid silver;
			padding: 10px 20px;
			margin: 20px;
		}
		.json-key {
			color: brown;
		}
		.json-value {
			color: navy;
		}
		.json-string {
			color: olive;
		}
		.footer {
			position: absolute;
			background-color: #f8f9fa;
			height: 3.5rem;
			bottom: 0;
			width: 100%;
			margin-bottom: 0;
		}
		.footer-text {
			padding-top: 1rem;
		}
		.diary {
			font-family: 'Architects Daughter', cursive;
		}
		.accordion-item {
			margin-top: 1vh;
		}
	</style>
	<body style="min-height: 100vh; position: relative">
		<nav class="navbar navbar-light" style="background-color: #e3f2fd">
			<div class="container-fluid">
				<span class="navbar-brand mb-0 h1 diary" style="font-size: 1.8rem"
					>GitHub-Information-api</span
				>
				<div class="d-flex">
					<a
						href="https://github.com/Jodu555/github-information-api"
						class="btn btn-outline-primary"
						>Source Code</a
					>
				</div>
			</div>
		</nav>
		<main style="margin-top: 7vh; padding-bottom: 3.5rem">
			<div class="container" style="margin-bottom: 15vh">
				<h1 class="text-center diary" style="margin-bottom: 3vh; font-size: 3.3rem">
					Github-Information-api
				</h1>
				<div class="callout-info shadow-sm p-3 mb-5 bg-body rounded" style="font-size: 2.8vmin">
					<strong style="font-weight: bold; font-size: 3.4vmin">Caching:</strong> The Whole
					Application works with a <strong>Caching-System</strong> <br />
					So all the data that gets returned includes a cache property if this is true then the time
					shows from when this data is!
					<br />
					<br />
					<strong><span style="font-size: 3vmin">Cache Time:</span>&nbsp;&nbsp;20 Minutes!</strong>
				</div>
				<div class="accordion accordion-flush" id="methods"></div>
			</div>
		</main>
		<footer class="footer">
			<p class="text-center text-muted footer-text">
				Â© Copyright
				<script>
					document.write(new Date().getFullYear());
				</script>
				by <a href="https://Jodu555.de">Jodu555</a> /
				<a href="https://jodu555.de/imprint">Impressum</a> /
				<a href="https://jodu555.de/privacy">Privacy Policy</a>
			</p>
		</footer>
	</body>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"
	></script>
	<script>
		appendDocPath(
			'GET',
			'/api/all/:username',
			'Gets all Public Projects',
			'Gets all the Public available Repositories from any specified User with their unique Title, Description, lastUpdated and Language',
			{
				data: {
					cache: true,
					time: 1638360081931,
					repositories: [
						{
							name: 'Repository Name',
							description: 'Repository Description',
							language: 'JavaScript',
							lastUpdated: 1638359999000,
						},
						{
							name: 'Another Repository Name',
							description: 'Another Repository Description',
							language: 'JavaScript',
							lastUpdated: 1638356870000,
						},
					],
				},
			}
		);
		appendDocPath(
			'GET',
			'/api/lastCommit/:username/:repositoryname?',
			'Gets the last commit for the specified thing',
			"Gets the last commit for the specified user or for the specified user's repository!",
			{
				data: {
					cache: true,
					time: 1638361774354,
					info: {
						name: 'Repository Name',
						description: 'Repository Description',
						language: 'JavaScript',
						lastUpdated: 1638361616000,
					},
				},
			}
		);
		appendDocPath(
			'GET',
			'/api/languageDevision/:username',
			'Gets the Language Devision fpr the user',
			'Gets the Language Devision for the specified user',
			{
				data: {
					cache: true,
					time: 1638361774354,
					devision: {
						JavaScript: 20,
						HTML: 1,
						EJS: 1,
						PHP: 1,
						Vue: 1,
						Java: 4,
					},
				},
			}
		);
		appendDocPath(
			'GET',
			'/api/dayCommits/:username',
			'Gets the count of commits per day',
			'Gets the count of commits for each day for the specified user',
			{
				data: {
					cache: false,
					time: 1638431635162,
					period: ['2020-11-29', '2021-12-02'],
					dayInfo: {
						'2020-11-29': {
							count: '0',
						},
						'2020-11-30': {
							count: '0',
						},
						'2020-12-01': {
							count: '0',
						},
					},
				},
			}
		);
		appendDocPath(
			'GET',
			'/api/avarageCommits/:username',
			'Gets the avarage Commits',
			'Gets total and avarage commits for the specified user',
			{
				period: ['2020-11-29', '2021-12-02'],
				total: 1261,
				values: 369,
				avarage: 3.42,
			}
		);

		class JSONPrinter {
			replacer(match, pIndent, pKey, pVal, pEnd) {
				const key = '<span class=json-key>';
				const val = '<span class=json-value>';
				const str = '<span class=json-string>';
				var r = pIndent || '';
				if (pKey) r = r + key + pKey.replace(/[": ]/g, '') + '</span>: ';
				if (pVal) r = r + (pVal[0] == '"' ? str : val) + pVal + '</span>';
				return r + (pEnd || '');
			}
			prettyPrint(obj) {
				const jsonLine = /^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm;
				return JSON.stringify(obj, null, 3)
					.replace(/&/g, '&amp;')
					.replace(/\\"/g, '&quot;')
					.replace(/</g, '&lt;')
					.replace(/>/g, '&gt;')
					.replace(jsonLine, this.replacer);
			}
		}

		const jsonPrinter = new JSONPrinter();
		[...document.querySelectorAll('[data-json]')].forEach((element) => {
			element.innerHTML = jsonPrinter.prettyPrint(
				JSON.parse(element.attributes['data-json'].value)
			);
		});

		function appendDocPath(type = 'GET', path, shortDesc, longDesc, response) {
			const ID = type + '--' + path.replaceAll('/', '').replaceAll(':', '').replaceAll('?', '');
			const div = document.createElement('div');
			div.classList.add('accordion-item');
			div.innerHTML += `<h2 class="accordion-header">
									<button
										class="accordion-button collapsed"
										type="button"
										data-bs-toggle="collapse"
										data-bs-target="#${ID}"
										aria-expanded="false"
									>
										<span class="get">${type}</span>
										<span class="url">${path}</span>
										<span class="info">${shortDesc}</span>
									</button>
								</h2>`;
			div.innerHTML += `<div id="${ID}" class="accordion-collapse collapse">
									<div class="accordion-body">
										<h2>Response</h2>
										<span class="description"
											>${longDesc}</span>
										</span>
										<pre><code data-json='${
											typeof response == 'object' ? JSON.stringify(response) : response
										}'></code></pre>
									</div>
								</div>`;
			document.querySelector('#methods').appendChild(div);
		}
	</script>
</html>
